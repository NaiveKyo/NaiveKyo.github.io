---
title: Design Patterns Overview
author: NaiveKyo
hide: false
img: 'https://cdn.jsdelivr.net/gh/NaiveKyo/CDN/medias/featureimages/22.jpg'
coverImg: /medias/featureimages/22.jpg
toc: true
date: 2021-08-31 20:42:54
top: false
cover: false
summary: 设计模式概述
categories: "Design Patterns"
keywords: "Design Patterns"
tags: "Design Patterns"
---



## 设计模式简介	

### 1、简介

1. 设计模式是程序员在面对同类软件工程设计问题所总结出来的有用的经验，模式不是代码，而是<mark>某类问题的通用解决方案</mark>，设计模式（Design Pattern）**代表了最佳的实践**。这些解决方案是众多软件开发人员经过相当长的一段时间的试验和错误总结出来的。
2. 设计模式的本质：提高软件的 维护性、通用性和扩展性，并降低软件的复杂程度。
3. 经典书籍《Design Pattern》



### 2、重要性

- 完成一个项目后，如果后期要添加新的功能（可扩展性）
- 项目的可维护性 （可读性、规范性）
- 实际项目中使用了什么设计模式、怎样使用的、解决了什么问题
- 设计模式在软件中的应用：
  - **面向对象（oo）==> 功能模块 [设计模式 + 算法 + 数据结构] ==> 框架 [使用多种设计模式] ==> 架构 [服务器集群]**



### 3、七大原则

- 单一职责：一个类或方法只做一件事
- 里氏替换：多态、子类可扩展父类
- 依赖倒置：细节依赖抽象，下层依赖上层
- 接口隔离：建立单一接口
- 迪米特原则：最少知道、降低耦合
- 开闭原则：抽象架构、扩展实现（<font style="color:red">核心</font>）
- 合成复用原则：尽量使用聚合/组合，少用继承



### 4、分类

#### （1）创建型模式

这类模式提供创建对象的机制，能够提升已有代码的灵活性和可复用性。

| 序号 |   类型   |                       业务场景                        |                           实现要点                           |
| :--: | :------: | :---------------------------------------------------: | :----------------------------------------------------------: |
|  1   | 工厂方法 |     多种类型的商品不同接口，统一发奖服务搭建场景      | 定义一个创建对象的接口，让其子类自己决定实例化哪一个工厂，工厂模式使其创建过程延迟到子类执行 |
|  2   | 抽象工厂 |         替换 Redis 双集群升级，代理类抽象场景         | 提供一个创建一系列相关或相互依赖对象的接口，而无需指定它们具体的类 |
|  3   |  建造者  |             各类装修物料组合套餐选配场景              | 将一个复杂的构建与其表示相分离，使得同样的构建过程可以创建不同的表示 |
|  4   |   原型   |     上机考试多套试题，每个人的题目和答案乱序排列      | 用原型实例指定创建对象的种类，并且通过拷贝这些原型创建新的对象 |
|  5   |   单例   | 7 种单例模式案例，Effective_Java 作者推荐枚举单例模式 |     保证一个类仅有一个实例，并提供一个访问它的全局访问点     |



#### （2）结构型模式

这类模式介绍如何将对象和类组装成较大的结构，并同时保持结构的灵活和高效。



| 序号 |  类型  |                           业务场景                           |                           实现要点                           |
| :--: | :----: | :----------------------------------------------------------: | :----------------------------------------------------------: |
|  1   | 适配器 |          从多个 MQ 消息体中，抽取指定的字段值的场景          | 将一个类的接口装换为客户希望的另外一个接口。适配器模式使得原本由于接口不兼容而不能一起工作的那些类可以一起工作 |
|  2   |  桥接  |   多支付渠道（微信、支付宝）与多支付模式（刷脸、指纹）场景   |       将抽象部分与实现部分分离，使它们都可以独立的变化       |
|  3   |  组合  |            营销差异化人群发券，决策树引擎搭建场景            | 将对象组合成树形结构以表示 "部分-整体" 的层次结构。组合模式使得客户对单个对象和组合对象的使用具有一致性 |
|  4   |  装饰  |      SSO 单点登录功能扩展，增加拦截用户访问方法范围场景      | 动态地给一个对象添加一些额外的职责。就增加功能来说，装饰器模式相比生成子类更为灵活 |
|  5   |  外观  |  基于 SpringBoot 开发门面模式中间件，统一控制接口白名单场景  | 为子系统的一组接口提供一个一致的界面，外观模式定义了一个高层接口，这个接口使得这一子系统更加容易使用 |
|  6   |  享元  |         基于 Redis 秒杀，提供活动与库存信息查询场景          |            运用共享技术有效地支持大量细粒度的对象            |
|  7   |  代理  | 模拟 mybatis-spring 中定义 DAO 接口，使用代理类方式操作数据库原理实现场景 |         为其他对象提供一种代理以控制对这个对象的访问         |



#### （3）行为模式

这类模式负责对象间的高效沟通和职责委派。



| 序号 |   类型   |                           业务场景                           |                           实现要点                           |
| :--: | :------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
|  1   |  职责链  |      模拟 618 电商大促期间，项目上线流程多级负责人审批       | 避免请求发送者与接收者耦合在一起，让多个对象都有可能接收请求，将这些对象连接成一条链，并且沿着这条链传递请求，直到有对象处理它为止 |
|  2   |   命令   |         模拟高档餐厅八大菜系，小二点单，厨师烹饪场景         |                 用不同的请求对客户进行参数化                 |
|  3   |  迭代器  |   模拟公司组织架构树结构关系，深度迭代遍历人员信息输出场景   | 提供一种方法顺序访问一个聚合对象中各个元素，而又无需暴露该对象的内部表示 |
|  4   |  中介者  | 按照 Mybatis 原理手写 ORM 框架，用 JDBC 方式操作数据库增加中介者场景 | 用一个中介对象来封装一系列的对象交互，中介者使各对象不需要显式地相互引用，从而使其耦合松散，而且可以独立地改变它们之间的交互 |
|  5   |  备忘录  |           模拟互联网系统上线过程，配置文件回滚场景           | 在不破坏封装性的前提下，捕获一个对象的内部状态，并在该对象外保存这个状态 |
|  6   |  观察者  |     模拟类似小客车指标摇号过程，监听消息通知用户中签场景     | 定义对象间的一种一对多的依赖关系，当一个对象的状态发生变化时，所有依赖于它的对象都得到通知并被自动更新 |
|  7   |   状态   |          模拟系统营销活动，状态流程审核发布上线场景          | 允许对象在内部状态发生改变时改变它的行为，对象看起来好像修改了它的类 |
|  8   |   策略   |         模拟多种营销类型优惠券，折扣金额计算策略场景         |  定义一系列算法，把它们一个个封装起来，并且使它们可相互替换  |
|  9   | 模板方法 |          模拟爬虫各类电商商品，生成营销推广海报场景          | 定义一个操作中算法的骨架，而将一些步骤延迟到子类中。模板方法使得子类可以不改变一个算法的结构即可重新定义该算法的某些特定步骤 |
|  10  |  访问者  |     模拟家长与校长，对学生和老师的不同视角信息的访问场景     |                 主要将数据结构与数据操作分离                 |



### 5、UML

UML：统一建模语言



画 UML 图与写文章差不多，都是把自己的思想描述出来给别人看，关键在于思路和条理。

UML 图分类：

1. 用例图（use case）
2. 静态结构图：**类图**、对象图、包图、组件图、部署图
3. 动态行为图：交互图（时序图与协作图）、状态图、活动图

说明：

- 类图描述类与类之间的关系，是 UML 图中最核心的



### 6、类图

- 类之间的关系：**依赖、泛化（继承）、实现、关联、聚合和组合**
- 依赖、泛化、实现，较为熟悉
- 关联关系实际上就是 **类与类之间的联系，它是依赖关系的特例**
  - 关联具有 **导航性**：即双向关系或单向关系
  - 关系具有多重性：如 1、0、0 1、n m、m 等等

（1）单向一对一关系：例如 人 和 身份证 可以是单向一对一的：

```java
public class Person {
  private IDCard card;
}
public class IDCard {}
```

（2）双向一对一关系：例如 人 和 身份证 也可以是双向一对一的

```java
public class Person {
  private IDCard card;
}
public class IDCard {
  private Person person;
}
```



- 聚合：整体和部分的关系，**整体与部分可以分开**，聚合关系是关联关系的特例

  - 带空心棱形的实线表示

- 组合：整体和部分的关系，**整体与部分不可以分开**，组合关系是关联关系的特例

  - 带实心棱形的实线表示



### 7、依赖关系

只要在 **类中使用到了对方**，那么它们之间就存在依赖关系

可能有以下几种情况：

- 类中使用到了对方
- 类的成员属性
- 方法的返回类型
- 方法接收的参数类型
- 在方法中使用到对方